% Emacs, this is -*- latex -*-!

\usepackage{mylhs2tex} % lhs2TeX setup

\usepackage{listings}
% Used with listings
\usepackage[scaled=0.88]{beramono} % http://wbillingsley.blogspot.de/2008/06/latex-monospace-bold-computer-modern.html

\usepackage[square,semicolon]{natbib}
% ToC entries for ToC, LoT, LoF, Bib
% https://tex.stackexchange.com/a/244746/1340
\usepackage{tocbibind}
\usepackage{rotating}
\usepackage{amsmath}
\usepackage{comment}
\usepackage[shortlabels]{enumitem}
% From https://tex.stackexchange.com/a/7856/1340:
% [titles] is from https://tex.stackexchange.com/a/111101/1340
\usepackage[titles]{tocloft}
\setlength{\cftsecnumwidth}{2.3em + 1ex} % 1ex extra for section numbers
\setlength{\cftsubsecindent}{3.8em + 1ex} % also shift subsections by 1ex
\setlength{\cftfignumwidth}{2.3em + 1ex} % 1ex extra for section numbers
\usepackage[utf8]{inputenc}
\usepackage{xparse}
% Kerning thinspace around ---.
% https://tex.stackexchange.com/a/109188/1340
\usepackage[kerning=true]{microtype}
\SetExtraKerning
    {encoding =  {OT1,T1,T2A,LY1,OT4,QX,T5,EU1,EU2}} % all text
    {
        \textemdash  = {167,167} % thinspace = 1/6 em
    }

%Useful for highlighting boxes, but unused yet.
%\usepackage{mdframed}

\usepackage{subcaption}

% This package allows hyphenation of compound words. Use \-/
% instead of - as hyphen to allow hyphenation elsewhere. Use \=/
% to additionally specify that hyphenation right after the dash
% is forbidden. However, this package with this setting redefines
% \- and \=!

\usepackage[shortcuts]{extdash}

\usepackage{etoolbox} %For newtoggle

% Introduce environment oldSec for material which we commented out but might
% still have bits to save:
\excludecomment{oldSec}
% Replace the above line with:
%\includecomment{oldSec}
% to comment those sections back in.
\newenvironment{optionalproof}{\begin{proof}}{\end{proof}}
\newenvironment{optionallemma}{\begin{lemma}}{\end{lemma}}

\usepackage{array}
\usepackage{booktabs}
\usepackage{mathpartir}

% Only used, for now, in pldi14/sec-rw for $\lambda$-diff's fractions.
% From https://tex.stackexchange.com/a/381565/1340.
\usepackage{xfrac}

% HEAVYWEIGHT (from 2s to 2.5s compile time), enable as late as possible.
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{xcolor}
% Enable backward-incompatible tikz bugfixes. Here, it saves wasted space for graphs.
\pgfplotsset{compat=1.13}
% Build tikz pictures into separate files. Enabled by
%\tikzexternalize in main document.
\usetikzlibrary{external}
\tikzset{external/system call={pdflatex -fmt=thesis-main.fmt \tikzexternalcheckshellescape -halt-on-error -interaction=batchmode -jobname "\image" "\texsource"}}

% Theorem setup.
\usepackage[amsmath,thmmarks,amsthm]{ntheorem}
\usepackage{thmtools}
\usepackage{thm-restate}
%
% Allow to hyphenate URLs on hyphens.
\PassOptionsToPackage{hyphens}{url}
% Load hyperref as last package
% (http://www.tex.ac.uk/cgi-bin/texfaq2html?label=hyperdupdest), except for
% bookmark (which would otherwise load hyperref with other options).
\usepackage[unicode=true,breaklinks=true,backref=page]{hyperref}

\hypersetup{
  bookmarksopen=true,
  bookmarksopenlevel=2,
  bookmarksnumbered=true,
  pdfstartview=FitH,
  pdfpagelayout=TwoPageLeft,
  pdfpagemode=UseOutlines, % default
  % pdfpagemode=None,
  linktoc=all,
}
\usepackage{bookmark}

% Allow using Î» in section headers and having it show in PDF bookmarks.
% http://tex.stackexchange.com/a/142906/1340
% Part 1:
\usepackage[verbose]{newunicodechar}

% Experiment with fncychap. I didn't like any of the results, that package is
% really badly designed.

% \usepackage[Glenn]{fncychap}
% % Original settings for Sonny:
% % \ChNameVar{\bfseries\Large\sf}
% % \ChNumVar{\Huge}
% % \ChTitleVar{\bfseries\Large\rm}
% % \ChRuleWidth{1pt}
% % \ChNameUpperCase
% % \ChTitleUpperCase
% \ChNameVar{\bfseries\Large\rmfamily\scshape}
% \ChTitleVar{\bfseries\Huge\rmfamily\upshape}
% \ChTitleAsIs
% \ChNameAsIs

% \usepackage[Sonny]{fncychap}
% % Original settings for Sonny:
% % \ChNameVar{\Large\sf}
% % \ChNumVar{\Huge}
% % \ChTitleVar{\Large\sf}
% % \ChRuleWidth{0.5pt}
% % \ChNameUpperCase

% % \ChNameVar{\Large\usefont{T1}{lmss}{sbc}{n}}
% % \ChNumVar{\Huge\fontseries{bx}}
% % \ChTitleVar{\Huge\sffamily\bfseries}
% % \ChRuleWidth{0.5pt}
% % \ChNameUpperCase

% \usepackage[Lenny]{fncychap}
% % Original settings for Lenny:
% % \ChNameVar{\fontsize{14}{16}\usefont{OT1}{phv}{m}{n}\selectfont}
% % \ChNumVar{\fontsize{60}{62}\usefont{OT1}{ptm}{m}{n}\selectfont}
% % \ChTitleVar{\Huge\bfseries\rm}
% % \ChRuleWidth{1pt}

% % Fixed settings:
% % \ChTitleVar{\Huge\bfseries\rmfamily}
% % \ChNameVar{\Large\sffamily}
% % % \ChNumVar{\fontsize{60}{62}\usefont{T1}{lmr}{m}{n}\selectfont}
% % %\ChTitleVar{\Huge\bfseries\fontfamily{lmss}\selectfont}
% % \ChRuleWidth{1pt}
