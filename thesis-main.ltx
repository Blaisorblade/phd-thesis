% The more static part of the thesis preamble

\RequirePackage{fix-cm}
\RequirePackage[T1]{fontenc}
% Ways to unbreak fonts, from https://tex.stackexchange.com/q/227063/1340.
\RequirePackage{lmodern}
% I just noticed the problem in the titlepage, so for now I just fix it there.
% Also headings for \part, \chapter etc. are affected, but they don't look so
% wrong so ignoring for now.
% https://tex.stackexchange.com/a/386933/1340

% Replace missing Latin Modern bold small capitals with Computer Modern bold
% small capitals.
\rmfamily
\DeclareFontShape{T1}{lmr}{b}{sc}{<->ssub*cmr/bx/sc}{}
\DeclareFontShape{T1}{lmr}{bx}{sc}{<->ssub*cmr/bx/sc}{}

\documentclass[a4paper]{book}

\title{Optimizing and Incrementalizing Higher-order Collection Queries by AST Transformation}
\author{Paolo G. Giarrusso}

\bibliographystyle{plainnat}

\input{packages}

\usepackage[tt=false]{libertine}
\usepackage[varqu]{inconsolata}
\usepackage[libertine]{newtxmath}

\makeatletter
\hypersetup{
  pdftitle={\@title},
  pdfauthor={\@author},
  pdfproducer={\@author},
  %pdfsubject={},
  %pdfkeywords={optimization, incremental computation, lambda calculus, collection queries}
}
\makeatother
\input{macros}

\input{aosd13/customMacros}
\input{pldi14/customMacros}

\input{pldi14/macros_part2}
% from pldi14
\newcommand{\ILC}{ILC}
% from aosd13
\excludecomment{extraEval}
\includecomment{techrep}
\excludecomment{nontechrep}
\includecomment{forNonBeamer}

% Conditional compilation across thesis and POPL18. With multiple commands.
\newtoggle{poplForThesis}
\toggletrue{poplForThesis}

% Own packages
\usepackage{fixstmaryrd}
%
\usepackage{alignmath}
%

% FROM POPL18
\usepackage{popl18/thesis-defs}
\usepackage{syntaxmacros}

% Number floats and figures together. Documented at
% http://stackoverflow.com/a/43266057/53974.
\makeatletter
\let\c@table\c@figure
\let\ftype@table\ftype@figure
\makeatother

\input{pldi14/agda}

\newtoggle{full}
\togglefalse{full}
\newtoggle{poplAsChapter}
\togglefalse{poplAsChapter} % For dev.
\newtoggle{tocs}
\togglefalse{tocs} % For dev.

\usepackage[main=english,ngerman,shorthands=off]{babel}
\hyphenation{Ber-nar-dy}

\input{lstsetup}

% From master thesis. Reduces the space for margin notes.
\usepackage[a4paper,bindingoffset=1cm]{geometry}

\urlstyle{sf} % Typeset URLs in sans-serif font, from url package.
